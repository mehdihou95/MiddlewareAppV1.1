CREATE TABLE sftp_config (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    client_id BIGINT NOT NULL,
    interface_id BIGINT NOT NULL,
    host VARCHAR(255) NOT NULL,
    port INT NOT NULL DEFAULT 22,
    username VARCHAR(255) NOT NULL,
    password VARCHAR(255),
    private_key_path VARCHAR(512),
    private_key_passphrase VARCHAR(255),
    monitored_directories JSON NOT NULL,
    processed_directory VARCHAR(255) NOT NULL,
    error_directory VARCHAR(255) NOT NULL,
    connection_timeout INT NOT NULL DEFAULT 5000,
    channel_timeout INT NOT NULL DEFAULT 30000,
    thread_pool_size INT NOT NULL DEFAULT 4,
    retry_attempts INT NOT NULL DEFAULT 3,
    retry_delay INT NOT NULL DEFAULT 5000,
    polling_interval INT NOT NULL DEFAULT 60000,
    active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (client_id) REFERENCES clients(id),
    FOREIGN KEY (interface_id) REFERENCES interfaces(id),
    UNIQUE KEY unique_client_interface (client_id, interface_id)
); 